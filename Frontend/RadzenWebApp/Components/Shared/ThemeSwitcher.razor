@inject ThemeService ThemeService
@implements IDisposable

<RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="0.5rem">
    <RadzenIcon Icon="palette" />
    <RadzenDropDown TValue="string"
                    Data="@_themes"
                    @bind-Value="@_selectedTheme"
                    Change="@OnThemeChanged"
                    TextProperty="Value"
                    ValueProperty="Key"
                    Style="width: 120px;" />
</RadzenStack>

@code {
    private string _selectedTheme = "standard";
    private readonly Dictionary<string, string> _themes = new()
    {
        { "standard", "Light" },
        { "dark", "Dark" }
    };

    protected override void OnInitialized()
    {
        _selectedTheme = ThemeService.Theme ?? "standard";
        ThemeService.ThemeChanged += OnThemeChangedHandler;
    }

    private void OnThemeChangedHandler()
    {
        StateHasChanged();
    }

    private void OnThemeChanged()
    {
        ThemeService.SetTheme(_selectedTheme);
    }

    public void Dispose()
    {
        ThemeService.ThemeChanged -= OnThemeChangedHandler;
    }
}
